


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.3">
    
    
      
        <title>Program a line-following algorithm - Robotics</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.947af8d5.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#program-a-line-following-algorithm" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Robotics" class="md-header-nav__button md-logo" aria-label="Robotics">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Robotics
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Program a line-following algorithm
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Robotics" class="md-nav__button md-logo" aria-label="Robotics">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Robotics
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Robotics With Raspberry Pi: Build and Program Your First Robot Buggy" class="md-nav__link">
      Robotics With Raspberry Pi: Build and Program Your First Robot Buggy
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Building a mobile robot
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Building a mobile robot" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Building a mobile robot
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step01/" title="Welcome to the course" class="md-nav__link">
      Welcome to the course
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step02/" title="Meet the team and your fellow learners" class="md-nav__link">
      Meet the team and your fellow learners
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step03/" title="The world of robotics" class="md-nav__link">
      The world of robotics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step04/" title="Raspberry Pi and General-Purpose Input/Output" class="md-nav__link">
      Raspberry Pi and General-Purpose Input/Output
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step05/" title="Connecting a motor to the motor controller" class="md-nav__link">
      Connecting a motor to the motor controller
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step06/" title="Connecting the Raspberry Pi and battery pack to the motorboard" class="md-nav__link">
      Connecting the Raspberry Pi and battery pack to the motorboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step07/" title="Testing the motors" class="md-nav__link">
      Testing the motors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step08/" title="Designing the chassis" class="md-nav__link">
      Designing the chassis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step09/" title="Attaching the components to the chassis" class="md-nav__link">
      Attaching the components to the chassis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step10/" title="Making the robot move" class="md-nav__link">
      Making the robot move
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step11/" title="Challenge: Driving in patterns" class="md-nav__link">
      Challenge: Driving in patterns
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step12/" title="Why we call robotics challenging" class="md-nav__link">
      Why we call robotics challenging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-1/fl-progrobot-w1-step13/" title="The end of week one" class="md-nav__link">
      The end of week one
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Automating actions using distance sensors
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Automating actions using distance sensors" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Automating actions using distance sensors
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-2/fl-progrobot-w2-step01/" title="Welcome to week two" class="md-nav__link">
      Welcome to week two
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-2/fl-progrobot-w2-step03/" title="How could you improve the functionality of the buggy?" class="md-nav__link">
      How could you improve the functionality of the buggy?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-2/fl-progrobot-w2-step04/" title="Robotic sensors" class="md-nav__link">
      Robotic sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-2/fl-progrobot-w2-step05/" title="Autonomous robots" class="md-nav__link">
      Autonomous robots
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-2/fl-progrobot-w2-step06/" title="Ultrasonic distance sensors" class="md-nav__link">
      Ultrasonic distance sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-2/fl-progrobot-w2-step07/" title="Attaching the UDS to the buggy" class="md-nav__link">
      Attaching the UDS to the buggy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-2/fl-progrobot-w2-step08/" title="Programming the UDS" class="md-nav__link">
      Programming the UDS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-2/fl-progrobot-w2-step09/" title="Avoiding obstacles autonomously" class="md-nav__link">
      Avoiding obstacles autonomously
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-2/fl-progrobot-w2-step10/" title="Challenge: Improving the obstacle-avoidance program" class="md-nav__link">
      Challenge: Improving the obstacle-avoidance program
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../week-2/fl-progrobot-w2-step12/" title="The end of week two" class="md-nav__link">
      The end of week two
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Allowing Robots to follow lines
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Allowing Robots to follow lines" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Allowing Robots to follow lines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../fl-progrobot-w3-step01/" title="Welcome to week three" class="md-nav__link">
      Welcome to week three
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fl-progrobot-w3-step03/" title="Line-sensing robots" class="md-nav__link">
      Line-sensing robots
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fl-progrobot-w3-step04/" title="Line sensors and how to use them" class="md-nav__link">
      Line sensors and how to use them
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fl-progrobot-w3-step05/" title="Connecting the line sensors" class="md-nav__link">
      Connecting the line sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fl-progrobot-w3-step06/" title="Testing the line sensors" class="md-nav__link">
      Testing the line sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fl-progrobot-w3-step07/" title="Sharing your progress" class="md-nav__link">
      Sharing your progress
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Program a line-following algorithm
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Program a line-following algorithm" class="md-nav__link md-nav__link--active">
      Program a line-following algorithm
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#program-a-line-following-algorithm" class="md-nav__link">
    Program a line-following algorithm
  </a>
  
    <nav class="md-nav" aria-label="Program a line-following algorithm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-the-motors-and-line-sensors" class="md-nav__link">
    Setting up the motors and line sensors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#describing-the-algorithm" class="md-nav__link">
    Describing the algorithm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-rules-of-the-algorithm" class="md-nav__link">
    The rules of the algorithm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-events" class="md-nav__link">
    Using events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programming-the-algorithm" class="md-nav__link">
    Programming the algorithm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ensuring-the-program-doesnt-run-forever" class="md-nav__link">
    Ensuring the program doesn't run forever
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-the-algorithm" class="md-nav__link">
    Testing the algorithm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discussion" class="md-nav__link">
    Discussion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fl-progrobot-w3-step09/" title="Improving the line following" class="md-nav__link">
      Improving the line following
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fl-progrobot-w3-step10/" title="Robotics is changing our lives" class="md-nav__link">
      Robotics is changing our lives
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fl-progrobot-w3-step14/" title="The end of the course" class="md-nav__link">
      The end of the course
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="/robotics.zip" title="Download course material (zip)" class="md-nav__link">
      Download course material (zip)
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#program-a-line-following-algorithm" class="md-nav__link">
    Program a line-following algorithm
  </a>
  
    <nav class="md-nav" aria-label="Program a line-following algorithm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-the-motors-and-line-sensors" class="md-nav__link">
    Setting up the motors and line sensors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#describing-the-algorithm" class="md-nav__link">
    Describing the algorithm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-rules-of-the-algorithm" class="md-nav__link">
    The rules of the algorithm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-events" class="md-nav__link">
    Using events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programming-the-algorithm" class="md-nav__link">
    Programming the algorithm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ensuring-the-program-doesnt-run-forever" class="md-nav__link">
    Ensuring the program doesn't run forever
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-the-algorithm" class="md-nav__link">
    Testing the algorithm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discussion" class="md-nav__link">
    Discussion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                  <h1>Program a line-following algorithm</h1>
                
                <div class="admonition resources">
<p class="admonition-title">Resources</p>
<ul>
<li><a href="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Videos/Robotics_Week_3.8.mp4">Video</a></li>
<li><a href="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Subtitles/Robotics_Week_3_8.vtt">Video subtitles</a></li>
</ul>
</div>
<h2 id="program-a-line-following-algorithm">Program a line-following algorithm</h2>
<p>Now that you have attached the line sensors, you are going to create a basic line-following algorithm using the readings from those sensors.</p>
<h3 id="setting-up-the-motors-and-line-sensors">Setting up the motors and line sensors</h3>
<p>First, you need to set up your program with the components you'll be interacting with.</p>
<p><strong>1.</strong> Create a new Python 3 file.</p>
<p><strong>2.</strong> Set up the program using the code below. You should recognise the elements from your previous programs.</p>
<pre><code class="python">from gpiozero import Robot, LineSensor
from time import sleep, time

robin = Robot(left=(8, 7), right=(9, 10))

left_sensor = LineSensor(19)
right_sensor= LineSensor(26)

robin.forward()
</code></pre>

<p>Don’t forget to adjust the pin numbers if you’ve used different GPIO pins for the motors or line sensors.</p>
<p>The <code>robin.forward()</code> command is used to get your robot started.</p>
<h3 id="describing-the-algorithm">Describing the algorithm</h3>
<p>The line sensors have two states: the line <strong>is</strong> detected, or the line <strong>is not</strong> detected. The current state of each sensor will help to define the rules of your algorithm.</p>
<p>To start with, consider what the robot should do when neither of the sensors detects the line. If the line is in the centre of the robot, both line sensors will return a 0, as they are over the white background. In this scenario, the robot should move forwards.</p>
<p>Think about the rest of the line-following algorithm:</p>
<ul>
<li>What is the initial position of the robot in relation to the line?</li>
<li>How should the robot react when the left sensor detects the line?</li>
<li>How should the robot react when the right sensor detects the line?</li>
</ul>
<p><img alt="Top down animation of a robot buggy following a black line. The buggy moves forwards and turns right if the right sensor detects the line, and turns left if the left sensor detects the line." src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Animation/3_4-line-following-buggy-animation.gif" /></p>
<h3 id="the-rules-of-the-algorithm">The rules of the algorithm</h3>
<p>The actions that the robot needs to take, depending on the readings it gets from the line sensors, are as follows:</p>
<ul>
<li>If there’s a line under the left sensor, turn left</li>
<li>If there’s a line under the right sensor, turn right</li>
<li>If there’s no line under either the left sensor <strong>or</strong> the right sensor, drive forwards</li>
</ul>
<h3 id="using-events">Using events</h3>
<p>To detect the state of each sensor, you are going to use two <strong>events</strong> from <code>LineSensor</code>, which is part of the GPIO Zero library.</p>
<p>So far you have been writing <strong>procedural</strong> programs, which generally run instructions from top to bottom, calling functions as they run.</p>
<p><strong>Event-driven</strong> programs operate somewhat differently. The main difference is that in an event-driven program, the flow of the program and the order in which instructions are run are determined by events, such as a button being pressed.</p>
<p>In your program, each of the line sensors will handle two events: <code>when_line</code> and <code>when_no_line</code>.</p>
<p>The <code>when_line</code> event is triggered whenever the sensor changes state from 0 (white background) to 1 (black line), while <code>when_no_line</code> is triggered when the sensor changes state from 1 to 0.</p>
<h3 id="programming-the-algorithm">Programming the algorithm</h3>
<p><strong>3.</strong> Within the Python file you set up, instruct your robot to move in a certain direction based on the rules of the algorithm.</p>
<pre><code class="python">left_sensor.when_line = robin.left
right_sensor.when_line = robin.right
left_sensor.when_no_line = robin.forward
right_sensor.when_no_line = robin.forward
</code></pre>

<p><strong>Note:</strong> Unlike calling these methods during a program, when using events, you should make sure not to put brackets after the method name. You are providing a reference to the method, not calling it. The event only needs you to provide the method name; when the event happens it will find the method and call it. If you include brackets with the method, it will be called immediately.</p>
<h3 id="ensuring-the-program-doesnt-run-forever">Ensuring the program doesn't run forever</h3>
<p>Currently, the motors will continue to run even after you close the program. If you ran the program at the moment, you would probably need to turn off the Raspberry Pi to stop your robot from moving.</p>
<p><strong>4.</strong> To make sure that the robot doesn’t keep running forever, and to close all the components' connections cleanly, add the following to the end of your program:</p>
<pre><code class="python">sleep(10)

robin.stop()
robin.close()
left_sensor.close()
right_sensor.close()
</code></pre>

<p>After ten seconds, the <code>stop()</code> command will stop both motors. Then the <code>close()</code> command will ensure that the motors and line sensors are shut down completely.</p>
<p>You can change the number of seconds to a different value if you want to test the robot for a different period of time.</p>
<h3 id="testing-the-algorithm">Testing the algorithm</h3>
<p><strong>5.</strong> Try running the program with your robot on your track.</p>
<p>Here is an example of a robot running on a basic track with this algorithm:</p>
<p><img alt="Video-gif of the robot wiggling side to side as it follows a basic track" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Photographs/3_8-basic-line-following-robot.gif" /></p>
<p>Don’t worry if your robot moves off the line a bit; just observe whether it follows the line. If it doesn't, check that the algorithm and the GPIO pin numbers you have specified in the program are correct. You may also need to check that the line sensors are accurately detecting the difference between the white surface and black line, using the instructions for testing the line sensors.</p>
<h3 id="discussion">Discussion</h3>
<p>How well does your robot follow the line?</p>
<p>Why do you think the command <code>robin.forward()</code> is necessary before the events are defined?</p>
<p>Share your thoughts in the comments section.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../fl-progrobot-w3-step07/" title="Sharing your progress" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Sharing your progress
              </div>
            </div>
          </a>
        
        
          <a href="../fl-progrobot-w3-step09/" title="Improving the line following" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Improving the line following
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.c3dc8c49.min.js"></script>
      <script src="../../assets/javascripts/bundle.f9edbbd5.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.8e2cddea.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>