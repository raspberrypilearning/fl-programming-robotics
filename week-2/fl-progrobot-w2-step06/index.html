<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Ultrasonic distance sensors - Robotics</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Ultrasonic distance sensors";
    var mkdocs_page_input_path = "week-2\\fl-progrobot-w2-step06.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Robotics</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">fl-programming-robotics</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Building a mobile robot</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step01/">Welcome to the course</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step02/">Meet the team and your fellow learners</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step03/">The world of robotics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step04/">Raspberry Pi and General-Purpose Input/Output</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step05/">Connecting a motor to the motor controller</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step06/">Connecting the Raspberry Pi and battery pack to the motorboard</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step07/">Testing the motors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step08/">Designing the chassis</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step09/">Attaching the components to the chassis</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step10/">Making the robot move</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step11/">Challenge: Driving in patterns</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step12/">Why we call robotics challenging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step13/">The end of week one</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Automating actions using distance sensors</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step01/">Welcome to week two</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step02/">Quiz: Mobile robotics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step03/">How could you improve the functionality of the buggy?</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step04/">Robotic sensors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step05/">Autonomous robots</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Ultrasonic distance sensors</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#ultrasound">Ultrasound</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#ultrasound-and-ultrasonic-distance-sensors">Ultrasound and ultrasonic distance sensors</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-to-use-a-uds">How to use a UDS</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#voltage-dividers">Voltage dividers</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#the-limitations-of-a-uds">The limitations of a UDS</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#test-your-voltage-divider">Test your voltage divider</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step07/">Attaching the UDS to the buggy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step08/">Programming the UDS</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step09/">Avoiding obstacles autonomously</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step10/">Challenge: Improving the obstacle-avoidance program</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step11/">Quiz: How do distance sensors work?</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step12/">The end of week two</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Allowing Robots to follow lines</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step01/">Welcome to week three</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step03/">Line-sensing robots</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step04/">Line sensors and how to use them</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step05/">Connecting the line sensors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step06/">Testing the line sensors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step07/">Sharing your progress</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step08/">Program a line-following algorithm</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step09/">Improving the line following</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step10/">Robotics is changing our lives</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step11/">Peer-assessment: Create a new function for your robot buggy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step12/">Reviewing your peer's work</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step14/">The end of the course</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Robotics</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Automating actions using distance sensors &raquo;</li>
        
      
    
    <li>Ultrasonic distance sensors</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>[comment]: # (
Is this step open? Y/N
If so, short description of this step:
Related links:
Related files:
)</p>
<h2 id="ultrasonic-distance-sensors">Ultrasonic distance sensors</h2>
<p>Your robot buggy will use an ultrasonic distance sensor (UDS) to help it navigate the physical world. In this step, you'll look at how these work.</p>
<h3 id="ultrasound">Ultrasound</h3>
<p>A UDS uses ultrasound to measure distances. Sound travels through the air in a <strong>wave pattern</strong>; measurements are made by examining the properties of the pattern over space and time.</p>
<p>As the sound travels, the particles in the air oscillate back and forth. This is often represented instead as a wave moving up and down on a graph. A sound's frequency is the number of oscillations per second. Frequency is measured in hertz (Hz); 1Hz corresponds to one oscillation per second.</p>
<p><img alt="A few sinusoidal waves showing the difference between high and low frequency sounds over time. Over the same amount of time, the higher frequency sounds undergo more cycles." src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/24-2_6_wave_frequency.png" /></p>
<p><strong>Ultrasound</strong> refers to any sound that has a frequency above the range of human hearing. This level varies from person to person, but on average, any sound with a frequency of 20kHz (20,000 oscillations  a second) or above is considered ultrasound.</p>
<p>The uses of ultrasound are many: doctors use the sound waves to scan inside human bodies, robots can use them to navigate the world, and <a href="https://www.hielscher.com/ultrasonic-formulation-of-reinforced-composites.htm">engineers use them to reinforce metals</a> by compressing the particles.</p>
<h3 id="ultrasound-and-ultrasonic-distance-sensors">Ultrasound and ultrasonic distance sensors</h3>
<p><img alt="An HC-SR04 ultrasonic distance sensor showing the emitter and receiver. The four pins are labelled (left to right) VCC, Trig, Echo, and GND." src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/8-Distance_sensor.png" /></p>
<p>A UDS works by sending out a burst of ultrasound. This sound will travel through air, but reflect back (echo) off surrounding objects. The sensor can detect the echo when it returns.</p>
<p><img alt="A UDS emitting ultrasound which is reflected of an object back towards the receiver." src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/2_6-UDS-emitting-sound.png" /></p>
<p>Using a measure of the time between the outgoing burst and the returning echo, and knowing the speed of sound, you can calculate how far away an object is from the sensor.</p>
<p>Commonly, a UDS requires two components to do this: an emitter and a receiver. You can see this in the picture above; the two silver cylinders on the front of the sensor are the emitter and receiver.</p>
<p>A particular advantage of these sensors over other distance measurers, specifically those that use light, is that a UDS is not affected by the colour of the object that the signal reflects off. However, errors can occur if the object can reflect sound away from the receiver.</p>
<h3 id="how-to-use-a-uds">How to use a UDS</h3>
<p>Now that you have a better idea of what a UDS is and how it works, you can move on to a more practical examination of how to use one with your buggy.</p>
<p>A UDS typically has four pins:</p>
<ul>
<li><strong>VCC</strong> needs to be connected to a 5V pin, in order to power the device</li>
<li><strong>Trig</strong> is the pin that triggers the emission of the ultrasound burst</li>
<li><strong>Echo</strong> is the pin that provides an output from the device; it outputs at 3.3V or 5V, depending on the UDS model</li>
<li><strong>GND</strong> is the ground pin, used to complete the circuit</li>
</ul>
<p>If the UDS is 5V-tolerant, this causes some issues because the <strong>echo</strong> pin will output 5V and the Raspberry Pi can only handle 3.3V. This means you will have to use some resistors to create a voltage divider, also known as a potential divider. Make sure to check the voltage tolerance of your UDS; the HC-SR04 sensor will need a voltage divider. A 3V3-tolerant sensor, such as the HC-SR04P, will work without a voltage divider.</p>
<h4 id="voltage-dividers">Voltage dividers</h4>
<p>A voltage (or potential) divider can split a voltage into two smaller voltages by using multiple resistors. The diagram below shows a single resistor connected to a 5V pin. The voltage across the resistor is 5V:</p>
<p><img alt="A circuit consisting of a 1000 ohm resistor  between a 5V pin and a GND pin. A 5V voltage is shown across the resistor." src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/25-2_6-voltage_divider_a.png" /></p>
<p>The diagram below shows how the voltage can be split by using two resistors wired in series. As both resistors are the same, the voltage is split equally between the two:</p>
<p><img alt="A circuit consisting of two 1000 ohm resistors  between a 5V pin and a GND pin. A 2.5V voltage is shown across each resistor." src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/26-2_6-voltage_divider_b.png" /></p>
<p>By altering the resistors, you can tailor the voltage across any one of them to be anything you like. Here, you can see that I have split the voltage to give us almost exactly 3.3V across the second resistor:</p>
<p><img alt="A circuit consisting of one 1200 ohm resistor and one 2200 ohm resistor connected in series between a 5V pin and a GND pin. The 1200 ohm resistor shows roughly 1.8V across it and the 2200 ohm resistor shows roughly 3.2V across each it." src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/27-2_6-voltage_divider_c.png" /></p>
<p>You can use the code below to work out the resistors you need:</p>
<pre><code class="python">R1 = 1200 # Your current resistor (alter this)
Vout = 3.3 # The voltage you are trying to achieve (always 3.3) across the resistor R2
Vin = 5 # The input voltage (always 5)

R2 = (Vout * R1) / (Vin - Vout)

print('The resistor you need is approximately', R2)
</code></pre>

<h3 id="the-limitations-of-a-uds">The limitations of a UDS</h3>
<p>The biggest limitation of this type of sensor comes into play when the object that reflects the ultrasound is very close. In this case, the receiver might not pick up the sound when it is initially reflected off an object, and may instead detect the sound once it has rebounded off another object. This results in an inaccurately high distance reading.</p>
<h3 id="test-your-voltage-divider">Test your voltage divider</h3>
<p>Using the code and formula above, decide what size resistors you would use to limit the voltage to 1V.</p>
<p>Share your thinking and answers in the comments below.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../fl-progrobot-w2-step07/" class="btn btn-neutral float-right" title="Attaching the UDS to the buggy">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../fl-progrobot-w2-step05/" class="btn btn-neutral" title="Autonomous robots"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../fl-progrobot-w2-step05/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../fl-progrobot-w2-step07/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
