<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Fl progrobot w2 step07 - Robotics</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Robotics</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../week-1/fl-progrobot-w1-step02.md" class="nav-link">A Step</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Week 1 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../week-1/fl-progrobot-w1-step01/" class="dropdown-item">Step</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="2"><a href="#attaching-the-uds-to-the-buggy" class="nav-link">Attaching the UDS to the buggy</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p>[comment]: # (
Is this step open? Y/N
If so, short description of this step:
Related links:
Related files:
)</p>
<h2 id="attaching-the-uds-to-the-buggy">Attaching the UDS to the buggy</h2>
<p>Now that you have read about how a UDS works, you are going to connect one to your Raspberry Pi. Make sure to check whether you need a voltage divider: check the model number or post a photo in the comments if you are unsure.</p>
<h3 id="what-you-will-need">What you will need</h3>
<p>For this step, you will need the following items:</p>
<ul>
<li>Ultrasonic distance sensor</li>
<li>Four female-to-female jumper leads</li>
</ul>
<p>If your UDS is 5V, you will also need:</p>
<ul>
<li>Two different resistors to split the voltage (e.g. a 330-ohm resistor and a 620-ohm resistor)</li>
<li>Two more female-to-female (six in total)</li>
<li>Soldering iron and solder</li>
<li>Tape</li>
</ul>
<p><img alt="The robot buggy parts for this step - Ultrasonic distance sensor, 6 x female-to-female jumper leads, Soldering iron and solder, 330 Ohm resistor, 620 Ohm resistor, Tape" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Photographs/2_7-parts-for-the-UDS.jpg" /></p>
<h3 id="wiring-the-uds">Wiring the UDS</h3>
<p>It is best to set up the UDS with the Raspberry Pi switched off, especially if your UDS is 5V. Otherwise, if you make a mistake with your wiring and the Raspberry Pi is turned on, you might damage it or the UDS.</p>
<p>As discussed previously, a typical UDS has four pins: <strong>VCC</strong>, <strong>trig</strong>, <strong>echo</strong>, and <strong>GND</strong>. All of these pins need to be connected to your Raspberry Pi.</p>
<p>The <strong>trig</strong> and <strong>echo</strong> pins can be wired to any available GPIO pins on your Pi, though if you choose different pins to the set-up below, the diagrams won't match. You'll also need to remember what pins you used and replace the pin numbers in the code accordingly.</p>
<p>Refer to the diagrams in this article or use a <a href="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/16-1_4-gpio-numbers-raspberry-pi-40-pin-header_To_Scale.pdf">reference board</a> that fits over the GPIO pins if you aren't sure which pins on the Raspberry Pi to use.</p>
<p><img alt="The layout of the GPIO pins on a 40-pin Raspberry Pi using GPIO numbering, which can be used as a reference guide" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/16-1_4-gpio-numbers-raspberry-pi-40-pin-header.png" /></p>
<p>SD Card End</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>3V3</td>
<td>5V</td>
</tr>
<tr>
<td>GPIO2</td>
<td>5V</td>
</tr>
<tr>
<td>GPIO3</td>
<td>GND</td>
</tr>
<tr>
<td>GPIO4</td>
<td>GPIO14</td>
</tr>
<tr>
<td>GND</td>
<td>GPIO15</td>
</tr>
<tr>
<td>GPIO17</td>
<td>GPIO18</td>
</tr>
<tr>
<td>GPIO27</td>
<td>GND</td>
</tr>
<tr>
<td>GPIO22</td>
<td>GPIO23</td>
</tr>
<tr>
<td>3V3</td>
<td>GPIO24</td>
</tr>
<tr>
<td>GPIO10</td>
<td>GND</td>
</tr>
<tr>
<td>GPIO9</td>
<td>GPIO25</td>
</tr>
<tr>
<td>GPIO11</td>
<td>GPIO8</td>
</tr>
<tr>
<td>GND</td>
<td>GPIO7</td>
</tr>
<tr>
<td>GPIO0</td>
<td>GPIO1</td>
</tr>
<tr>
<td>GPIO5</td>
<td>GND</td>
</tr>
<tr>
<td>GPIO6</td>
<td>GPIO12</td>
</tr>
<tr>
<td>GPIO13</td>
<td>GND</td>
</tr>
<tr>
<td>GPIO19</td>
<td>GPIO16</td>
</tr>
<tr>
<td>GPIO26</td>
<td>GPIO20</td>
</tr>
<tr>
<td>GND</td>
<td>GPIO21</td>
</tr>
</tbody>
</table>
<p>USB port end</p>
<h4 id="wiring-the-vcc-trig-and-gnd-pins">Wiring the VCC, trig, and GND pins</h4>
<ol>
<li>
<p>Start by connecting the <strong>VCC</strong> pin on your UDS to a 5V pin on your Raspberry Pi, using a female-to-female jumper lead.</p>
</li>
<li>
<p>Connect the <strong>trig</strong> pin on the UDS to an available GPIO pin on your Raspberry Pi; I've used <strong>GPIO 4</strong>.</p>
</li>
<li>
<p>Connect the <strong>GND</strong> pin from your UDS to a ground pin on your Raspberry Pi.</p>
</li>
</ol>
<p>The instructions for wiring the <strong>echo</strong> pin are different depending on whether the UDS is <strong>3.3V-tolerant</strong> or <strong>5V-tolerant</strong>.</p>
<h4 id="wiring-the-echo-pin-on-a-5v-uds">Wiring the echo pin on a 5V UDS</h4>
<p>If the output of the echo pin is 5V, you need to reduce the output voltage to a <strong>maximum of 3.3V</strong>.</p>
<p>For the purposes of this example, I'm going to use a 330-ohm resistor and a 620-ohm resistor. You can use different resistors to these, but you must ensure that the voltage across the larger resistor has been reduced to 3.3V or just below, using the voltage divider algorithm seen previously.</p>
<p>The first thing to do is to solder the pair of resistors together. Then you need to solder a female jumper lead to the other end of each resistor. This part might be easier to do with two people or by using a <a href="https://www.instructables.com/id/How-to-Make-a-Helping-Hands-for-Soldering-at-Home-/">helping hand</a>. Once the solder has cooled, add tape to secure and insulate all of the joins.</p>
<p><img alt="Two resistors soldered together with one female jumper lead soldered to the other end of each resistor" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Photographs/2_7-resistors-and-jumper-leads-soldered-together.jpg" /></p>
<p>Next, attach a third female jumper lead to the join between the two resistors. Add tape to secure this join in place.</p>
<p><img alt="A third female jumper lead soldered to the join between the two resistors" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Photographs/2_7-third-jumper-lead-soldered-to-resistors.jpg" /></p>
<p>Now you need to attach the jumper leads to your UDS and the Raspberry Pi.</p>
<ul>
<li>The lead that joins to the <strong>smaller</strong> of the two resistors needs to go into the <strong>echo</strong> pin on your UDS</li>
<li>The lead that branches out from <strong>between</strong> the resistors should go into <strong>GPIO 17</strong></li>
<li>The lead that comes out of the <strong>larger</strong> of the two resistors must go into a ground pin on your Raspberry Pi</li>
</ul>
<p>The diagram below shows you the complete set-up for a 5V UDS:</p>
<p><img alt="A UDS with wires and two resistors connecting to a Raspberry Pi GPIO reference board. The VCC wire on the UDS connects to 5V, Trig connects to GP4, and GND connects to GND on the reference card. The Echo pin on the UDS connects to a 330 ohm resistor, which connects to a 620 ohm resistor and a wire that connects to GP17 on the reference card. The 620 ohm resistor also connects to GND on the reference card" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/29-2_7-wiring-5V-UDS-diagram.png" /></p>
<h4 id="wiring-the-echo-pin-on-a-33v-uds">Wiring the echo pin on a 3.3V UDS</h4>
<p>Wiring a 3.3V UDS is fairly simple, as the output voltage of the echo pin does not need to be reduced.</p>
<p>The diagram below shows you the complete set-up for a 3.3V UDS, with the echo pin connected to <strong>GPIO 17</strong> on the Raspberry Pi:</p>
<p><img alt="A UDS with four wires connecting to a Raspberry Pi GPIO reference board. The VCC wire on the UDS connects to 5V, Trig connects to GP4, Echo connects to GP17, and GND connects to GND on the reference card." src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/28-2_7-wiring-3V3-UDS-diagram.png" /></p>
<h3 id="securing-the-uds-to-the-chassis">Securing the UDS to the chassis</h3>
<p>Now that your UDS is connected to your Raspberry Pi, you will need to attach the UDS to the front of the chassis so that your robot can detect objects in front of the buggy.  </p>
<p>Mark where you want the emitter and receiver (the two silver cylinders from the diagram above) to protrude from the chassis.</p>
<p><img alt="The UDS cylinders being marked on the chassis were they need to be secured" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Photographs/2_7-marking-UDS-on-the-chassis.jpg" /></p>
<p>Cut two holes into the chassis that are just big enough for the emitter and receiver to poke through, then push the cylinders through the holes. You can also add tape to attach the UDS more securely to the chassis.</p>
<p><img alt="The UDS attached to the chassis" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Photographs/2_7-UDS-attached-to-chassis.jpg" /></p>
<h3 id="checking-the-connections">Checking the connections</h3>
<p>It's easy for the jumper leads to come loose from the Raspberry Pi while you are moving parts of the robot around, so double-check that all your pins are connected properly before turning on your Pi.</p>
<h3 id="discussion">Discussion</h3>
<p>Share any issues you had with wiring the UDS or attaching it to the chassis in the comments.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
