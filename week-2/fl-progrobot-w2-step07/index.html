<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Attaching the UDS to the buggy - Robotics</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Attaching the UDS to the buggy";
    var mkdocs_page_input_path = "week-2\\fl-progrobot-w2-step07.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Robotics</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">fl-programming-robotics</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Building a mobile robot</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step01/">Welcome to the course</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step02/">Meet the team and your fellow learners</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step03/">The world of robotics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step04/">Raspberry Pi and General-Purpose Input/Output</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step05/">Connecting a motor to the motor controller</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step06/">Connecting the Raspberry Pi and battery pack to the motorboard</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step07/">Testing the motors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step08/">Designing the chassis</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step09/">Attaching the components to the chassis</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step10/">Making the robot move</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step11/">Challenge: Driving in patterns</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step12/">Why we call robotics challenging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step13/">The end of week one</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Automating actions using distance sensors</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step01/">Welcome to week two</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step02/">Quiz: Mobile robotics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step03/">How could you improve the functionality of the buggy?</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step04/">Robotic sensors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step05/">Autonomous robots</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step06/">Ultrasonic distance sensors</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Attaching the UDS to the buggy</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#what-you-will-need">What you will need</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#wiring-the-uds">Wiring the UDS</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#wiring-the-vcc-trig-and-gnd-pins">Wiring the VCC, trig, and GND pins</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#wiring-the-echo-pin-on-a-5v-uds">Wiring the echo pin on a 5V UDS</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#wiring-the-echo-pin-on-a-33v-uds">Wiring the echo pin on a 3.3V UDS</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#securing-the-uds-to-the-chassis">Securing the UDS to the chassis</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#checking-the-connections">Checking the connections</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#discussion">Discussion</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step08/">Programming the UDS</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step09/">Avoiding obstacles autonomously</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step10/">Challenge: Improving the obstacle-avoidance program</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step11/">Quiz: How do distance sensors work?</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step12/">The end of week two</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Allowing Robots to follow lines</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step01/">Welcome to week three</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step03/">Line-sensing robots</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step04/">Line sensors and how to use them</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step05/">Connecting the line sensors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step06/">Testing the line sensors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step07/">Sharing your progress</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step08/">Program a line-following algorithm</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step09/">Improving the line following</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step10/">Robotics is changing our lives</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step11/">Peer-assessment: Create a new function for your robot buggy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step12/">Reviewing your peer's work</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step14/">The end of the course</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Robotics</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Automating actions using distance sensors &raquo;</li>
        
      
    
    <li>Attaching the UDS to the buggy</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>[comment]: # (
Is this step open? Y/N
If so, short description of this step:
Related links:
Related files:
)</p>
<h2 id="attaching-the-uds-to-the-buggy">Attaching the UDS to the buggy</h2>
<p>Now that you have read about how a UDS works, you are going to connect one to your Raspberry Pi. Make sure to check whether you need a voltage divider: check the model number or post a photo in the comments if you are unsure.</p>
<h3 id="what-you-will-need">What you will need</h3>
<p>For this step, you will need the following items:</p>
<ul>
<li>Ultrasonic distance sensor</li>
<li>Four female-to-female jumper leads</li>
</ul>
<p>If your UDS is 5V, you will also need:</p>
<ul>
<li>Two different resistors to split the voltage (e.g. a 330-ohm resistor and a 620-ohm resistor)</li>
<li>Two more female-to-female (six in total)</li>
<li>Soldering iron and solder</li>
<li>Tape</li>
</ul>
<p><img alt="The robot buggy parts for this step - Ultrasonic distance sensor, 6 x female-to-female jumper leads, Soldering iron and solder, 330 Ohm resistor, 620 Ohm resistor, Tape" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Photographs/2_7-parts-for-the-UDS.jpg" /></p>
<h3 id="wiring-the-uds">Wiring the UDS</h3>
<p>It is best to set up the UDS with the Raspberry Pi switched off, especially if your UDS is 5V. Otherwise, if you make a mistake with your wiring and the Raspberry Pi is turned on, you might damage it or the UDS.</p>
<p>As discussed previously, a typical UDS has four pins: <strong>VCC</strong>, <strong>trig</strong>, <strong>echo</strong>, and <strong>GND</strong>. All of these pins need to be connected to your Raspberry Pi.</p>
<p>The <strong>trig</strong> and <strong>echo</strong> pins can be wired to any available GPIO pins on your Pi, though if you choose different pins to the set-up below, the diagrams won't match. You'll also need to remember what pins you used and replace the pin numbers in the code accordingly.</p>
<p>Refer to the diagrams in this article or use a <a href="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/16-1_4-gpio-numbers-raspberry-pi-40-pin-header_To_Scale.pdf">reference board</a> that fits over the GPIO pins if you aren't sure which pins on the Raspberry Pi to use.</p>
<p><img alt="The layout of the GPIO pins on a 40-pin Raspberry Pi using GPIO numbering, which can be used as a reference guide" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/16-1_4-gpio-numbers-raspberry-pi-40-pin-header.png" /></p>
<p>SD Card End</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>3V3</td>
<td>5V</td>
</tr>
<tr>
<td>GPIO2</td>
<td>5V</td>
</tr>
<tr>
<td>GPIO3</td>
<td>GND</td>
</tr>
<tr>
<td>GPIO4</td>
<td>GPIO14</td>
</tr>
<tr>
<td>GND</td>
<td>GPIO15</td>
</tr>
<tr>
<td>GPIO17</td>
<td>GPIO18</td>
</tr>
<tr>
<td>GPIO27</td>
<td>GND</td>
</tr>
<tr>
<td>GPIO22</td>
<td>GPIO23</td>
</tr>
<tr>
<td>3V3</td>
<td>GPIO24</td>
</tr>
<tr>
<td>GPIO10</td>
<td>GND</td>
</tr>
<tr>
<td>GPIO9</td>
<td>GPIO25</td>
</tr>
<tr>
<td>GPIO11</td>
<td>GPIO8</td>
</tr>
<tr>
<td>GND</td>
<td>GPIO7</td>
</tr>
<tr>
<td>GPIO0</td>
<td>GPIO1</td>
</tr>
<tr>
<td>GPIO5</td>
<td>GND</td>
</tr>
<tr>
<td>GPIO6</td>
<td>GPIO12</td>
</tr>
<tr>
<td>GPIO13</td>
<td>GND</td>
</tr>
<tr>
<td>GPIO19</td>
<td>GPIO16</td>
</tr>
<tr>
<td>GPIO26</td>
<td>GPIO20</td>
</tr>
<tr>
<td>GND</td>
<td>GPIO21</td>
</tr>
</tbody>
</table>
<p>USB port end</p>
<h4 id="wiring-the-vcc-trig-and-gnd-pins">Wiring the VCC, trig, and GND pins</h4>
<ol>
<li>
<p>Start by connecting the <strong>VCC</strong> pin on your UDS to a 5V pin on your Raspberry Pi, using a female-to-female jumper lead.</p>
</li>
<li>
<p>Connect the <strong>trig</strong> pin on the UDS to an available GPIO pin on your Raspberry Pi; I've used <strong>GPIO 4</strong>.</p>
</li>
<li>
<p>Connect the <strong>GND</strong> pin from your UDS to a ground pin on your Raspberry Pi.</p>
</li>
</ol>
<p>The instructions for wiring the <strong>echo</strong> pin are different depending on whether the UDS is <strong>3.3V-tolerant</strong> or <strong>5V-tolerant</strong>.</p>
<h4 id="wiring-the-echo-pin-on-a-5v-uds">Wiring the echo pin on a 5V UDS</h4>
<p>If the output of the echo pin is 5V, you need to reduce the output voltage to a <strong>maximum of 3.3V</strong>.</p>
<p>For the purposes of this example, I'm going to use a 330-ohm resistor and a 620-ohm resistor. You can use different resistors to these, but you must ensure that the voltage across the larger resistor has been reduced to 3.3V or just below, using the voltage divider algorithm seen previously.</p>
<p>The first thing to do is to solder the pair of resistors together. Then you need to solder a female jumper lead to the other end of each resistor. This part might be easier to do with two people or by using a <a href="https://www.instructables.com/id/How-to-Make-a-Helping-Hands-for-Soldering-at-Home-/">helping hand</a>. Once the solder has cooled, add tape to secure and insulate all of the joins.</p>
<p><img alt="Two resistors soldered together with one female jumper lead soldered to the other end of each resistor" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Photographs/2_7-resistors-and-jumper-leads-soldered-together.jpg" /></p>
<p>Next, attach a third female jumper lead to the join between the two resistors. Add tape to secure this join in place.</p>
<p><img alt="A third female jumper lead soldered to the join between the two resistors" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Photographs/2_7-third-jumper-lead-soldered-to-resistors.jpg" /></p>
<p>Now you need to attach the jumper leads to your UDS and the Raspberry Pi.</p>
<ul>
<li>The lead that joins to the <strong>smaller</strong> of the two resistors needs to go into the <strong>echo</strong> pin on your UDS</li>
<li>The lead that branches out from <strong>between</strong> the resistors should go into <strong>GPIO 17</strong></li>
<li>The lead that comes out of the <strong>larger</strong> of the two resistors must go into a ground pin on your Raspberry Pi</li>
</ul>
<p>The diagram below shows you the complete set-up for a 5V UDS:</p>
<p><img alt="A UDS with wires and two resistors connecting to a Raspberry Pi GPIO reference board. The VCC wire on the UDS connects to 5V, Trig connects to GP4, and GND connects to GND on the reference card. The Echo pin on the UDS connects to a 330 ohm resistor, which connects to a 620 ohm resistor and a wire that connects to GP17 on the reference card. The 620 ohm resistor also connects to GND on the reference card" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/29-2_7-wiring-5V-UDS-diagram.png" /></p>
<h4 id="wiring-the-echo-pin-on-a-33v-uds">Wiring the echo pin on a 3.3V UDS</h4>
<p>Wiring a 3.3V UDS is fairly simple, as the output voltage of the echo pin does not need to be reduced.</p>
<p>The diagram below shows you the complete set-up for a 3.3V UDS, with the echo pin connected to <strong>GPIO 17</strong> on the Raspberry Pi:</p>
<p><img alt="A UDS with four wires connecting to a Raspberry Pi GPIO reference board. The VCC wire on the UDS connects to 5V, Trig connects to GP4, Echo connects to GP17, and GND connects to GND on the reference card." src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Illustration/28-2_7-wiring-3V3-UDS-diagram.png" /></p>
<h3 id="securing-the-uds-to-the-chassis">Securing the UDS to the chassis</h3>
<p>Now that your UDS is connected to your Raspberry Pi, you will need to attach the UDS to the front of the chassis so that your robot can detect objects in front of the buggy.  </p>
<p>Mark where you want the emitter and receiver (the two silver cylinders from the diagram above) to protrude from the chassis.</p>
<p><img alt="The UDS cylinders being marked on the chassis were they need to be secured" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Photographs/2_7-marking-UDS-on-the-chassis.jpg" /></p>
<p>Cut two holes into the chassis that are just big enough for the emitter and receiver to poke through, then push the cylinders through the holes. You can also add tape to attach the UDS more securely to the chassis.</p>
<p><img alt="The UDS attached to the chassis" src="https://rpf-futurelearn.s3-eu-west-1.amazonaws.com/Robotics+-+Robot+Buggy/Photographs/2_7-UDS-attached-to-chassis.jpg" /></p>
<h3 id="checking-the-connections">Checking the connections</h3>
<p>It's easy for the jumper leads to come loose from the Raspberry Pi while you are moving parts of the robot around, so double-check that all your pins are connected properly before turning on your Pi.</p>
<h3 id="discussion">Discussion</h3>
<p>Share any issues you had with wiring the UDS or attaching it to the chassis in the comments.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../fl-progrobot-w2-step08/" class="btn btn-neutral float-right" title="Programming the UDS">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../fl-progrobot-w2-step06/" class="btn btn-neutral" title="Ultrasonic distance sensors"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../fl-progrobot-w2-step06/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../fl-progrobot-w2-step08/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
