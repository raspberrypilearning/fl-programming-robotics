<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Challenge: Improving the obstacle-avoidance program - Robotics</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Challenge: Improving the obstacle-avoidance program";
    var mkdocs_page_input_path = "week-2\\fl-progrobot-w2-step10.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Robotics</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">fl-programming-robotics</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Building a mobile robot</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step01/">Welcome to the course</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step02/">Meet the team and your fellow learners</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step03/">The world of robotics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step04/">Raspberry Pi and General-Purpose Input/Output</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step05/">Connecting a motor to the motor controller</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step06/">Connecting the Raspberry Pi and battery pack to the motorboard</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step07/">Testing the motors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step08/">Designing the chassis</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step09/">Attaching the components to the chassis</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step10/">Making the robot move</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step11/">Challenge: Driving in patterns</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step12/">Why we call robotics challenging</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-1/fl-progrobot-w1-step13/">The end of week one</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Automating actions using distance sensors</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step01/">Welcome to week two</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step02/">Quiz: Mobile robotics</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step03/">How could you improve the functionality of the buggy?</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step04/">Robotic sensors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step05/">Autonomous robots</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step06/">Ultrasonic distance sensors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step07/">Attaching the UDS to the buggy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step08/">Programming the UDS</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step09/">Avoiding obstacles autonomously</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Challenge: Improving the obstacle-avoidance program</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#changing-some-of-the-values">Changing some of the values</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#changing-the-robots-behaviour">Changing the robot's behaviour</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#two-steps-forward-one-step-back">Two steps forward, one step back</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#randomising-the-amount-of-time-the-robot-turns">Randomising the amount of time the robot turns</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#choosing-a-random-direction">Choosing a random direction</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#limitations-of-the-uds">Limitations of the UDS</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#objects-that-are-too-close">Objects that are too close</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#objects-that-are-to-the-side">Objects that are to the side</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#what-improvements-will-you-make">What improvements will you make?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#discussion">Discussion</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step11/">Quiz: How do distance sensors work?</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../fl-progrobot-w2-step12/">The end of week two</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Allowing Robots to follow lines</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step01/">Welcome to week three</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step03/">Line-sensing robots</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step04/">Line sensors and how to use them</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step05/">Connecting the line sensors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step06/">Testing the line sensors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step07/">Sharing your progress</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step08/">Program a line-following algorithm</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step09/">Improving the line following</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step10/">Robotics is changing our lives</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step11/">Peer-assessment: Create a new function for your robot buggy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step12/">Reviewing your peer's work</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../week-3/fl-progrobot-w3-step14/">The end of the course</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Robotics</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Automating actions using distance sensors &raquo;</li>
        
      
    
    <li>Challenge: Improving the obstacle-avoidance program</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>[comment]: # (
Is this step open? Y/N
If so, short description of this step:
Related links:
Related files:
)</p>
<h2 id="challenge-improving-the-obstacle-avoidance-program">Challenge: Improving the obstacle-avoidance program</h2>
<p>There are a number of modifications that will improve your robot's ability to avoid objects autonomously. Most of these require changes to the program from the previous step.</p>
<p>First, I suggest making a copy of your program before modifying any of the code, in case something you try doesn't work out.</p>
<h3 id="changing-some-of-the-values">Changing some of the values</h3>
<p>Begin by experimenting with different distance thresholds and sleep values, to see how that affects the performance of the robot.</p>
<p>For example, the distance threshold of 0.2 metres used in the previous program may need to be increased slightly if your robot does not start to turn out of the way of an obstacle in time.</p>
<p>You can also change the sleep value of 0.5 seconds, so that the robot continues turning for more or less time once the threshold value has been met.</p>
<h3 id="changing-the-robots-behaviour">Changing the robot's behaviour</h3>
<p>Currently, the robot turns left for a set amount of time whenever an object is detected as being too close. </p>
<p>This predictable behaviour has the potential to cause issues. One problem is that the robot might get stuck in an obstacle avoidance loop when turning by a fixed amount each time. In this situation, the robot keeps detecting the same obstacles over and over again, seemingly with no way to escape!</p>
<p>There are a number of changes you can make to the robot's behaviour.</p>
<h4 id="two-steps-forward-one-step-back">Two steps forward, one step back</h4>
<p>One modification you can make is to instruct the robot to move backwards for a period of time before turning to avoid an object. This will give your robot a chance to avoid obstacles if it has found itself in a dead end.</p>
<p>Another solution is to introduce random aspects into the robot's movements.</p>
<h4 id="randomising-the-amount-of-time-the-robot-turns">Randomising the amount of time the robot turns</h4>
<p>Rather than turning left for a set amount of time, you can instruct the program to generate a random number of seconds within a certain range of values.</p>
<p>To add this functionality, you will need to import the <code>random</code> library into your Python program. Use the function <code>random.uniform(a, b)</code> to return a random floating-point number, where <code>a</code> is the lowest value and <code>b</code> is the highest value.</p>
<h4 id="choosing-a-random-direction">Choosing a random direction</h4>
<p>Another modification to the robot's behaviour is to allow the program to choose a random direction to turn once an obstacle has been detected. Instead of always turning left, the robot could be instructed to turn <em>either</em> left or right. How might you code this?</p>
<h3 id="limitations-of-the-uds">Limitations of the UDS</h3>
<p>There are some limitations it is important to be aware of when using a UDS. Finding workarounds to these problems will ensure that your program is robust.</p>
<h4 id="objects-that-are-too-close">Objects that are too close</h4>
<p>You may have noticed that an object that is really close to the UDS returns a much larger distance than expected. This occurs if an object is closer than the minimum distance a UDS can detect accurately; for the HC-SR04 and HC-SR04P models, the detection distance is from about 2 cm to 500 cm.</p>
<p>Take a look at the distance values that are output when an object is very close to the UDS and see if you can find a solution within the program to pick up these objects.</p>
<h4 id="objects-that-are-to-the-side">Objects that are to the side</h4>
<p>Another issue that your robot may run into is that, depending on the width of your robot, the UDS won't detect objects on either side of it that are going to be in the way.</p>
<p>One solution to this would be to add an extra UDS to the front of the robot, so that there is one on each side of the chassis. This modification would also require the program to be adapted so that it is able to work with two UDSs.</p>
<h3 id="what-improvements-will-you-make">What improvements will you make?</h3>
<p>Improve your program using one of the ideas in this step:</p>
<ul>
<li>Change the distance threshold and/or sleep values</li>
<li>Once your robot has detected an obstacle:<ul>
<li>Instruct it to move backwards before turning left</li>
<li>Generate a random number of seconds for the robot to turn for</li>
<li>Get the program to choose a random direction for the robot to turn in</li>
</ul>
</li>
<li>Find a solution for detecting objects that are closer than the minimum detection distance of your UDS</li>
<li>Attach another UDS to the chassis and modify your program so it works with two UDSs</li>
</ul>
<h3 id="discussion">Discussion</h3>
<p>Can you think of any other improvements that you could make?</p>
<p>In the comments below, share the changes you made and add a link to your new code using <a href="https://pastebin.com/">Pastebin</a>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../fl-progrobot-w2-step11/" class="btn btn-neutral float-right" title="Quiz: How do distance sensors work?">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../fl-progrobot-w2-step09/" class="btn btn-neutral" title="Avoiding obstacles autonomously"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../fl-progrobot-w2-step09/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../fl-progrobot-w2-step11/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
